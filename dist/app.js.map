{"version":3,"sources":["webpack:///dist/app.js","webpack:///webpack/bootstrap 066613b04ad47ed5c6ad","webpack:///./node_modules/apprun/dist/apprun.js","webpack:///./src/hacker-news.tsx","webpack:///./src/api.ts","webpack:///external \"firebase\""],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","t","e","this","r","default","value","Component","a","on","update","createElement","render","start","assign","global_event","mount","u","window","app","document","addEventListener","_events","debug","console","log","push","fn","options","run","arguments","length","assert","filter","delay","apply","once","_t","clearTimeout","setTimeout","App","Reflect","defineMetadata","action","key","meta","WeakMap","has","set","getMetadataKeys","getPrototypeOf","keys","getMetadata","f","firstChild","appendChild","nodeName","tag","toUpperCase","parentNode","replaceChild","Math","min","childNodes","children","textContent","nodeType","props","h","removeChild","lastChild","y","createDocumentFragment","indexOf","insertAdjacentHTML","substring","createTextNode","JSON","stringify","createElementNS","forEach","style","cssText","Array","isArray","id","updateElement","__assign","state","view","_app","_history","_history_idx","renderState","element","getElementById","_component","rendered","setState","Promise","then","catch","error","history","enable_history","concat","callback","prev","next","add_actions","model","is_global_event","startsWith","add_action","split","trim","route","onpopstate","location","hash","slice","pluralize","number","label","timeAgo","time","between","Date","now","Number","apprun_1","_","Comment","_a","comment","className","by","text","Comments","item","kids","list","num","items","deleted","dead","map","Item","href","url","title","score","descendants","onclick","back","ListItem","idx","item_link","List","max","type","font-weight","float","margin-right","#","more","body","target","matches","classList","toggle","nextElementSibling","__awaiter","thisArg","_arguments","P","generator","resolve","reject","fulfilled","step","rejected","result","done","__generator","verb","v","op","TypeError","ops","pop","trys","g","sent","throw","return","Symbol","iterator","_this","Firebase","initializeApp","databaseURL","db","database","ref","fetch","path","child","snapshot","val","fetchItem","_b","all","fetchListItems","_c","firebase"],"mappings":"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","file":"dist/app.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 1);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n!function(t,e){ true?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.apprun=e():t.apprun=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,\"a\",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p=\"\",e(e.s=0)}([function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(1),o=n(8),i=n(10);e.Component=i.Component;var a=n(11),s=n(4);e.on=s.on,e.update=s.update,r.default.createElement=o.createElement,r.default.render=o.render,r.default.start=function(t,e,n,r,o){var a=Object.assign(o||{},{render:!0,global_event:!0}),s=new i.Component(e,n,r);return s.mount(t,a),s};var u=r.default;\"object\"==typeof window&&(window.app&&window.app.start?u=window.app:(window.app=u,document.addEventListener(\"DOMContentLoaded\",function(){return new a.default}))),e.default=u},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=function(){function t(){this._events={}}return t.prototype.on=function(t,e,n){void 0===n&&(n={}),n.debug&&console.log(\"on: \"+t),this._events[t]=this._events[t]||[],this._events[t].push({fn:e,options:n})},t.prototype.run=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=this._events[t];console.assert(!!o,\"No subscriber for event: \"+t),o&&(this._events[t]=o.filter(function(r){var o=r.fn,i=r.options;return i.delay?e.delay(t,o,n,i):(i.debug&&console.log(\"run: \"+t,n),o.apply(e,n)),!r.options.once}))},t.prototype.delay=function(t,e,n,r){var o=this;r._t&&clearTimeout(r._t),r._t=setTimeout(function(){clearTimeout(r._t),r.debug&&console.log(\"run-delay \"+r.delay+\":\"+t,n),e.apply(o,n)},r.delay)},t}();e.App=r,e.default=new r},,,function(t,e,n){\"use strict\";function r(t,n){return void 0===n&&(n={}),function(r,o,i){return t=o+(t?\",\"+t:\"\"),e.Reflect.defineMetadata(\"apprun-update:\"+t,{name:t,action:[i.value,n]},r),i}}function o(t,n){return void 0===n&&(n={}),function(n,r){t=r+(t?\",\"+t:\"\"),e.Reflect.defineMetadata(\"apprun-update:\"+t,{name:t,key:r},n)}}Object.defineProperty(e,\"__esModule\",{value:!0}),e.Reflect={meta:new WeakMap,defineMetadata:function(t,e,n){this.meta.has(n)||this.meta.set(n,{}),this.meta.get(n)[t]=e},getMetadataKeys:function(t){return t=Object.getPrototypeOf(t),this.meta.get(t)?Object.keys(this.meta.get(t)):[]},getMetadata:function(t,e){return e=Object.getPrototypeOf(e),this.meta.get(e)?this.meta.get(e)[t]:null}},e.update=r,e.on=o},,function(t,e,n){\"use strict\";function r(t,e){f=0,e&&t&&(t.firstChild?i(t.firstChild,e):t.appendChild(s(e)))}function o(t,e){return t.nodeName===(\"\"+(e.tag||\"\")).toUpperCase()}function i(t,e){if(console.assert(!!t),!o(t,e))return void t.parentNode.replaceChild(s(e),t);for(var n=Math.min(t.childNodes.length,e.children.length),r=0;r<n;r++){var u=e.children[r],d=t.childNodes[r];if(\"string\"==typeof u)d.textContent!==u&&(3===d.nodeType?d.textContent=u:t.replaceChild(a(u),d));else{var l=u.props&&u.props.key;if(l)if(d.key===l)i(t.childNodes[r],u);else{var f=l&&h[l];f?(t.replaceChild(f,d),t.appendChild(d),i(t.childNodes[r],u)):(t.appendChild(s(e),d),i(t.childNodes[r],u))}else i(t.childNodes[r],u)}}for(var p=t.childNodes.length;p>n;)t.removeChild(t.lastChild),p--;if(e.children.length>n){for(var y=document.createDocumentFragment(),r=n;r<e.children.length;r++)y.appendChild(s(e.children[r]));t.appendChild(y)}c(t,e.props)}function a(t){if(0===t.indexOf(\"_html:\")){var e=document.createElement(\"div\");return e.insertAdjacentHTML(\"afterbegin\",t.substring(6)),e}return document.createTextNode(t)}function s(t){if(console.assert(null!==t&&void 0!==t),\"string\"==typeof t)return a(t);if(!t.tag)return a(JSON.stringify(t));var e=\"svg\"===t.tag?document.createElementNS(\"http://www.w3.org/2000/svg\",t.tag):document.createElement(t.tag);return c(e,t.props),t.children&&t.children.forEach(function(t){return e.appendChild(s(t))}),e}function u(t,e){var n={};return t&&Object.keys(t).forEach(function(t){return n[t]=\"\"}),e&&Object.keys(e).forEach(function(t){return n[t]=e[t]}),n}function c(t,e){console.assert(!!t);var n=t[l]||{};e=u(n,e),t[l]=e;for(var r in e){var o=e[r];if(n[r]!==o)if(\"style\"===r){t.style.cssText&&(t.style.cssText=\"\");for(var i in o)t.style[i]!==o[i]&&(t.style[i]=o[i])}else t[r]!==o&&(t[r]=o),\"key\"===r&&o&&(h[o]=t)}}Object.defineProperty(e,\"__esModule\",{value:!0});var d=n(9),l=\"_props\";e.createElement=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=[],i=function(t){null!==t&&void 0!==t&&\"\"!==t&&o.push(\"function\"==typeof t||\"object\"==typeof t?t:\"\"+t)};if(n.forEach(function(t){Array.isArray(t)?t.forEach(function(t){return i(t)}):i(t)}),\"string\"==typeof t)return{tag:t,props:e,children:o};if(Object.getPrototypeOf(t).name){var a=e&&e.id||\"_\"+t.name+\"_\"+ ++f;return d.default(t,a,e)}return t(e,o)};var f=0,h={};e.updateElement=r,e.render=r,e.default={createElement:e.createElement,updateElement:e.updateElement}},,function(t,e,n){\"use strict\";function r(t,e){console.assert(!!t),o.updateElement(t,e)}Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(6);e.createElement=o.createElement,e.render=r},function(t,e,n){\"use strict\";function r(t,e,n){var r=i[e]?i[e]:i[e]=new t(n).mount(e);return o.default.createElement(\"div\",{id:e},r.render&&r.render())}Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(1),i={};e.default=r},function(t,e,n){\"use strict\";var r=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(1),i=n(4),a=function(){function t(t,e,n,i){var a=this;this.state=t,this.view=e,this.update=n,this.options=i,this._app=new o.App,this._history=[],this._history_idx=-1,this.start=function(t,e){return void 0===t&&(t=null),void 0===e&&(e={render:!0}),a.mount(t,r({},e,{render:!0}))},this.render=function(){return a.view(a.state)}}return t.prototype.renderState=function(t){if(this.view){var e=this.view(t),n=\"string\"==typeof this.element?document.getElementById(this.element):this.element;n&&(n._component=this),n&&o.default.render&&(o.default.render(n,e),this.rendered&&this.rendered(this.state))}},t.prototype.setState=function(t,e){var n=this;if(t instanceof Promise)t.then(function(t){n.setState(t,e)}).catch(function(t){throw console.error(t),t});else{if(null==t)return;this.state=t,!1!==e.render&&this.renderState(t),!1!==e.history&&this.enable_history&&(this._history=this._history.concat([t]),this._history_idx=this._history.length-1),\"function\"==typeof e.callback&&e.callback(this.state)}},t.prototype.mount=function(t,e){var n=this;if(void 0===t&&(t=null),console.assert(!this.element,\"Component already mounted.\"),this.options=e=Object.assign(this.options||{},e),this.element=t,this.global_event=e.global_event,this.enable_history=!!e.history,this.enable_history){var r=function(){n._history_idx--,n._history_idx>=0?n.setState(n._history[n._history_idx],{render:!0,history:!1}):n._history_idx=0},o=function(){n._history_idx++,n._history_idx<n._history.length?n.setState(n._history[n._history_idx],{render:!0,history:!1}):n._history_idx=n._history.length-1};this.on(e.history.prev||\"history-prev\",r),this.on(e.history.next||\"history-next\",o)}return this.add_actions(),void 0===this.state&&(this.state=this.model||{}),e.render?this.setState(this.state,{render:!0,history:!0}):this.setState(this.state,{render:!1,history:!0}),this},t.prototype.is_global_event=function(t){return t&&(t.startsWith(\"#\")||t.startsWith(\"/\"))},t.prototype.add_action=function(t,e,n){var r=this;void 0===n&&(n={}),e&&\"function\"==typeof e&&this.on(t,function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var i=e.apply(void 0,[r.state].concat(t));r.setState(i,n)},n)},t.prototype.add_actions=function(){var t=this,e=this.update||{};i.Reflect.getMetadataKeys(this).forEach(function(n){if(n.startsWith(\"apprun-update:\")){var r=i.Reflect.getMetadata(n,t);e[r.name]=r.action||t[r.key]}});var n={};Object.keys(e).forEach(function(t){var r=e[t];(\"function\"==typeof r||Array.isArray(r))&&t.split(\",\").forEach(function(t){return n[t.trim()]=r})}),Object.keys(n).forEach(function(e){var r=n[e];\"function\"==typeof r?t.add_action(e,r):Array.isArray(r)&&t.add_action(e,r[0],r[1])})},t.prototype.run=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this.global_event||this.is_global_event(t)?o.default.run.apply(o.default,[t].concat(e)):(r=this._app).run.apply(r,[t].concat(e));var r},t.prototype.on=function(t,e,n){return this.global_event||this.is_global_event(t)?o.default.on(t,e,n):this._app.on(t,e,n)},t}();e.Component=a},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(1),o=function(){function t(){var t=this;r.default.on(\"route\",function(e){return t.route(e)}),window.onpopstate=function(e){return t.route(location.hash)},this.route(location.hash)}return t.prototype.route=function(t){if(t||(t=\"#\"),t.indexOf(\"/\")>0){var e=t.split(\"/\"),n=e[0],o=e.slice(1);r.default.run.apply(r.default,[n].concat(o)),r.default.run.apply(r.default,[\"//\",n].concat(o))}else r.default.run(t),r.default.run(\"//\",t)},t}();e.default=o}])});\n//# sourceMappingURL=apprun.js.map\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar apprun_1 = __webpack_require__(0);\r\n__webpack_require__(2);\r\napprun_1.default.on('//', function (_) { });\r\nvar page_size = 30;\r\nvar state = {};\r\nvar Comment = function (_a) {\r\n    var comment = _a.comment;\r\n    if (!comment)\r\n        return;\r\n    return apprun_1.default.createElement(\"li\", { className: 'comment' },\r\n        apprun_1.default.createElement(\"div\", { className: 'meta' },\r\n            apprun_1.default.createElement(\"span\", null,\r\n                \"by \",\r\n                comment.by),\r\n            \" |\\u00A0\",\r\n            apprun_1.default.createElement(\"span\", null,\r\n                timeAgo(comment.time),\r\n                \" ago\")),\r\n        apprun_1.default.createElement(\"div\", { className: 'text' }, \"_html:\" + comment.text),\r\n        apprun_1.default.createElement(Comments, { item: comment }));\r\n};\r\nvar Comments = function (_a) {\r\n    var item = _a.item;\r\n    if (!item || !item.kids)\r\n        return;\r\n    var list = item.kids;\r\n    var num = item.kids && item.kids.filter(function (items) { return !item.deleted && !item.dead; }).length;\r\n    return apprun_1.default.createElement(\"div\", null,\r\n        num && apprun_1.default.createElement(\"div\", { className: 'toggle' },\r\n            pluralize(num, ' comment'),\r\n            \" \"),\r\n        apprun_1.default.createElement(\"ul\", { className: 'comment-list' },\r\n            \" \",\r\n            list.filter(function (item) { return !item.deleted; })\r\n                .map(function (item) { return apprun_1.default.createElement(Comment, { comment: item }); })));\r\n};\r\nvar Item = function (_a) {\r\n    var item = _a.item;\r\n    if (!item)\r\n        return;\r\n    return apprun_1.default.createElement(\"div\", { className: 'story' },\r\n        apprun_1.default.createElement(\"h4\", null,\r\n            apprun_1.default.createElement(\"a\", { href: item.url }, item.title)),\r\n        (item.text) && apprun_1.default.createElement(\"div\", { className: 'text' }, \"_html:\" + item.text),\r\n        apprun_1.default.createElement(\"div\", { className: 'meta' },\r\n            apprun_1.default.createElement(\"span\", null, pluralize(item.score, ' point')),\r\n            \" |\\u00A0\",\r\n            apprun_1.default.createElement(\"span\", null,\r\n                \"by \",\r\n                item.by),\r\n            \" |\\u00A0\",\r\n            apprun_1.default.createElement(\"span\", null,\r\n                timeAgo(item.time),\r\n                \" ago\"),\r\n            \" |\\u00A0\",\r\n            apprun_1.default.createElement(\"span\", null,\r\n                pluralize(item.descendants, ' comment'),\r\n                \" (in total)  |\\u00A0\"),\r\n            apprun_1.default.createElement(\"span\", null,\r\n                apprun_1.default.createElement(\"a\", { onclick: function () { return history.back(); } }, \"back\"))),\r\n        apprun_1.default.createElement(Comments, { item: item }));\r\n};\r\nvar ListItem = function (_a) {\r\n    var item = _a.item, idx = _a.idx;\r\n    if (!item)\r\n        return;\r\n    var item_link = \"#/item/\" + item.id;\r\n    return apprun_1.default.createElement(\"li\", null,\r\n        apprun_1.default.createElement(\"div\", { className: 'score' }, item.score),\r\n        apprun_1.default.createElement(\"div\", null,\r\n            apprun_1.default.createElement(\"a\", { href: item.url || item_link }, item.title)),\r\n        apprun_1.default.createElement(\"div\", { className: 'meta' },\r\n            apprun_1.default.createElement(\"span\", null,\r\n                \"by \",\r\n                item.by),\r\n            \" |\\u00A0\",\r\n            apprun_1.default.createElement(\"span\", null,\r\n                timeAgo(item.time),\r\n                \" ago\"),\r\n            \" |\\u00A0\",\r\n            apprun_1.default.createElement(\"span\", null,\r\n                apprun_1.default.createElement(\"a\", { href: \"\" + item_link }, pluralize(item.descendants, ' comment')))));\r\n};\r\nvar List = function (_a) {\r\n    var list = _a.list;\r\n    if (!list || !list.items)\r\n        return;\r\n    return apprun_1.default.createElement(\"div\", null,\r\n        apprun_1.default.createElement(\"ul\", { className: 'story-list' },\r\n            \" \",\r\n            list.items.filter(function (item, i) { return i >= list.min && i < list.max && (typeof item !== 'number'); })\r\n                .map(function (item) { return apprun_1.default.createElement(ListItem, { item: item, idx: list.items.indexOf(item) + 1 }); })),\r\n        apprun_1.default.createElement(\"div\", { className: 'more' },\r\n            apprun_1.default.createElement(\"span\", null,\r\n                list.min + 1,\r\n                \" - \",\r\n                list.max,\r\n                \" (\",\r\n                list.items.length,\r\n                \") \\u00A0\"),\r\n            list.items && list.max < list.items.length && apprun_1.default.createElement(\"a\", { onclick: function () { return apprun_1.default.run('more'); } }, \" |\\u00A0 More ...\")));\r\n};\r\nvar view = function (state) {\r\n    if (state instanceof Promise)\r\n        return;\r\n    var style = function (type) { return ({ 'font-weight': type === state.type ? 'bold' : 'normal' }); };\r\n    return apprun_1.default.createElement(\"div\", { className: \"hn \" + state.type },\r\n        apprun_1.default.createElement(\"div\", { className: 'header' },\r\n            apprun_1.default.createElement(\"div\", { className: 'inner' },\r\n                apprun_1.default.createElement(\"div\", { style: { 'float': 'left' } },\r\n                    apprun_1.default.createElement(\"span\", { style: { 'margin-right': '20px' } },\r\n                        apprun_1.default.createElement(\"a\", { href: 'https://github.com/yysun/apprun' }, \"AppRun\"),\r\n                        \" \\u2764\\u00A0\",\r\n                        apprun_1.default.createElement(\"a\", { href: 'https://news.ycombinator.com' }, \"HN\")),\r\n                    apprun_1.default.createElement(\"a\", { style: style('top'), href: \"#/top\" }, \"Top\"),\r\n                    \" |\\u00A0\",\r\n                    apprun_1.default.createElement(\"a\", { style: style('new'), href: \"#/new\" }, \"New\"),\r\n                    \" |\\u00A0\",\r\n                    apprun_1.default.createElement(\"a\", { style: style('best'), href: \"#/best\" }, \"Best\"),\r\n                    \" |\\u00A0\",\r\n                    apprun_1.default.createElement(\"a\", { style: style('show'), href: \"#/show\" }, \"Show\"),\r\n                    \" |\\u00A0\",\r\n                    apprun_1.default.createElement(\"a\", { style: style('ask'), href: \"#/ask\" }, \"Ask\"),\r\n                    \" |\\u00A0\",\r\n                    apprun_1.default.createElement(\"a\", { style: style('job'), href: \"#/job\" }, \"Jobs\")))),\r\n        apprun_1.default.createElement(\"div\", { className: 'main' },\r\n            apprun_1.default.createElement(\"div\", { className: 'inner' }, state.type === 'item' ?\r\n                apprun_1.default.createElement(Item, { item: state[state.id] }) :\r\n                apprun_1.default.createElement(List, { list: state[state.type] }))),\r\n        apprun_1.default.createElement(\"div\", { className: 'footer' },\r\n            apprun_1.default.createElement(\"div\", { className: 'inner' },\r\n                \"Powered by \",\r\n                apprun_1.default.createElement(\"a\", { href: 'https://github.com/yysun/apprun' }, \"AppRun\"),\r\n                \", Source code: \",\r\n                apprun_1.default.createElement(\"a\", { href: 'https://github.com/yysun/apprun-hn' }, \"Github\"))));\r\n};\r\nvar update = {\r\n    '#': function (state, type, id) {\r\n        type = type || state.type || 'top';\r\n        state.type = type;\r\n        state[type] = state[type] || { min: 0, max: page_size, items: [] };\r\n        state.id = id;\r\n        type === 'item' ?\r\n            apprun_1.default.run('get-item', id, state) :\r\n            apprun_1.default.run('get-list', type, state[type]);\r\n    },\r\n    'render': function (state) { return state; },\r\n    'more': function (state) {\r\n        var list = state[state.type];\r\n        list.max = Math.min(list.max + page_size, list.items.length);\r\n        apprun_1.default.run('get-list', state.type, list);\r\n    },\r\n};\r\napprun_1.default.start('my-app', state, view, update);\r\ndocument.body.addEventListener('click', function (e) {\r\n    var t = e.target;\r\n    if (t.matches('.toggle')) {\r\n        t.classList.toggle('closed');\r\n        t.nextElementSibling && t.nextElementSibling.classList.toggle('collapsed');\r\n    }\r\n});\r\nfunction pluralize(number, label) {\r\n    if (!number)\r\n        number = 0;\r\n    return (number === 1) ? number + label : number + label + 's';\r\n}\r\nfunction timeAgo(time) {\r\n    var between = Date.now() / 1000 - Number(time);\r\n    if (between < 3600) {\r\n        return pluralize(~~(between / 60), ' minute');\r\n    }\r\n    else if (between < 86400) {\r\n        return pluralize(~~(between / 3600), ' hour');\r\n    }\r\n    else {\r\n        return pluralize(~~(between / 86400), ' day');\r\n    }\r\n}\r\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar _this = this;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar apprun_1 = __webpack_require__(0);\r\nvar Firebase = __webpack_require__(3);\r\nFirebase.initializeApp({ databaseURL: 'https://hacker-news.firebaseio.com' });\r\nvar db = Firebase.database().ref('/v0');\r\nvar fetch = function (path) { return __awaiter(_this, void 0, void 0, function () {\r\n    var ref;\r\n    return __generator(this, function (_a) {\r\n        ref = db.child(path);\r\n        return [2 /*return*/, new Promise(function (resolve, reject) {\r\n                ref.once('value', function (snapshot) { return resolve(snapshot.val()); }, reject);\r\n            })];\r\n    });\r\n}); };\r\nvar fetchItem = function (id) { return __awaiter(_this, void 0, void 0, function () {\r\n    var _this = this;\r\n    var item, _a;\r\n    return __generator(this, function (_b) {\r\n        switch (_b.label) {\r\n            case 0: return [4 /*yield*/, fetch(\"item/\" + id)];\r\n            case 1:\r\n                item = _b.sent();\r\n                if (!(item && item.kids)) return [3 /*break*/, 3];\r\n                _a = item;\r\n                return [4 /*yield*/, Promise.all(item.kids.map(function (item) { return __awaiter(_this, void 0, void 0, function () {\r\n                        var _a;\r\n                        return __generator(this, function (_b) {\r\n                            switch (_b.label) {\r\n                                case 0:\r\n                                    if (!(typeof item === 'number')) return [3 /*break*/, 2];\r\n                                    return [4 /*yield*/, fetchItem(item)];\r\n                                case 1:\r\n                                    _a = _b.sent();\r\n                                    return [3 /*break*/, 3];\r\n                                case 2:\r\n                                    _a = item;\r\n                                    _b.label = 3;\r\n                                case 3: return [2 /*return*/, _a];\r\n                            }\r\n                        });\r\n                    }); }))];\r\n            case 2:\r\n                _a.kids = _b.sent();\r\n                _b.label = 3;\r\n            case 3: return [2 /*return*/, item];\r\n        }\r\n    });\r\n}); };\r\napprun_1.default.on('get-list', function (type, list) {\r\n    var fetchListItems = function (_a) {\r\n        var items = _a.items, min = _a.min, max = _a.max;\r\n        return __awaiter(_this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0: return [4 /*yield*/, Promise.all(items.map(function (id, idx) { return __awaiter(_this, void 0, void 0, function () {\r\n                            var _a, _b;\r\n                            return __generator(this, function (_c) {\r\n                                switch (_c.label) {\r\n                                    case 0:\r\n                                        if (!(idx >= min && idx < max && (typeof id === 'number'))) return [3 /*break*/, 2];\r\n                                        _a = items;\r\n                                        _b = idx;\r\n                                        return [4 /*yield*/, fetch(\"item/\" + id)];\r\n                                    case 1:\r\n                                        _a[_b] = _c.sent();\r\n                                        _c.label = 2;\r\n                                    case 2: return [2 /*return*/];\r\n                                }\r\n                            });\r\n                        }); }))];\r\n                    case 1:\r\n                        _b.sent();\r\n                        apprun_1.default.run('render');\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    if (list.items.length)\r\n        return fetchListItems(list);\r\n    var ref = db.child(type + \"stories\");\r\n    ref.on('value', function (snapshot) { return __awaiter(_this, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            list.items = snapshot.val();\r\n            fetchListItems(list);\r\n            return [2 /*return*/];\r\n        });\r\n    }); });\r\n});\r\napprun_1.default.on('get-item', function (id, state) {\r\n    if (!id)\r\n        return;\r\n    var ref = db.child(\"item/\" + id);\r\n    ref.on('value', function (snapshot) { return __awaiter(_this, void 0, void 0, function () {\r\n        var _this = this;\r\n        var _a;\r\n        return __generator(this, function (_b) {\r\n            switch (_b.label) {\r\n                case 0:\r\n                    state[id] = snapshot.val();\r\n                    if (!state[id].kids) return [3 /*break*/, 2];\r\n                    _a = state[id];\r\n                    return [4 /*yield*/, Promise.all(state[id].kids.map(function (id) { return __awaiter(_this, void 0, void 0, function () {\r\n                            var _a;\r\n                            return __generator(this, function (_b) {\r\n                                switch (_b.label) {\r\n                                    case 0:\r\n                                        if (!(typeof id === 'number')) return [3 /*break*/, 2];\r\n                                        return [4 /*yield*/, fetchItem(id)];\r\n                                    case 1:\r\n                                        _a = _b.sent();\r\n                                        return [3 /*break*/, 3];\r\n                                    case 2:\r\n                                        _a = id;\r\n                                        _b.label = 3;\r\n                                    case 3: return [2 /*return*/, _a];\r\n                                }\r\n                            });\r\n                        }); }))];\r\n                case 1:\r\n                    _a.kids = _b.sent();\r\n                    _b.label = 2;\r\n                case 2:\r\n                    apprun_1.default.run('render');\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    }); });\r\n});\r\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\nmodule.exports = firebase;\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// dist/app.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 066613b04ad47ed5c6ad","!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.apprun=e():t.apprun=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,\"a\",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p=\"\",e(e.s=0)}([function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(1),o=n(8),i=n(10);e.Component=i.Component;var a=n(11),s=n(4);e.on=s.on,e.update=s.update,r.default.createElement=o.createElement,r.default.render=o.render,r.default.start=function(t,e,n,r,o){var a=Object.assign(o||{},{render:!0,global_event:!0}),s=new i.Component(e,n,r);return s.mount(t,a),s};var u=r.default;\"object\"==typeof window&&(window.app&&window.app.start?u=window.app:(window.app=u,document.addEventListener(\"DOMContentLoaded\",function(){return new a.default}))),e.default=u},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=function(){function t(){this._events={}}return t.prototype.on=function(t,e,n){void 0===n&&(n={}),n.debug&&console.log(\"on: \"+t),this._events[t]=this._events[t]||[],this._events[t].push({fn:e,options:n})},t.prototype.run=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=this._events[t];console.assert(!!o,\"No subscriber for event: \"+t),o&&(this._events[t]=o.filter(function(r){var o=r.fn,i=r.options;return i.delay?e.delay(t,o,n,i):(i.debug&&console.log(\"run: \"+t,n),o.apply(e,n)),!r.options.once}))},t.prototype.delay=function(t,e,n,r){var o=this;r._t&&clearTimeout(r._t),r._t=setTimeout(function(){clearTimeout(r._t),r.debug&&console.log(\"run-delay \"+r.delay+\":\"+t,n),e.apply(o,n)},r.delay)},t}();e.App=r,e.default=new r},,,function(t,e,n){\"use strict\";function r(t,n){return void 0===n&&(n={}),function(r,o,i){return t=o+(t?\",\"+t:\"\"),e.Reflect.defineMetadata(\"apprun-update:\"+t,{name:t,action:[i.value,n]},r),i}}function o(t,n){return void 0===n&&(n={}),function(n,r){t=r+(t?\",\"+t:\"\"),e.Reflect.defineMetadata(\"apprun-update:\"+t,{name:t,key:r},n)}}Object.defineProperty(e,\"__esModule\",{value:!0}),e.Reflect={meta:new WeakMap,defineMetadata:function(t,e,n){this.meta.has(n)||this.meta.set(n,{}),this.meta.get(n)[t]=e},getMetadataKeys:function(t){return t=Object.getPrototypeOf(t),this.meta.get(t)?Object.keys(this.meta.get(t)):[]},getMetadata:function(t,e){return e=Object.getPrototypeOf(e),this.meta.get(e)?this.meta.get(e)[t]:null}},e.update=r,e.on=o},,function(t,e,n){\"use strict\";function r(t,e){f=0,e&&t&&(t.firstChild?i(t.firstChild,e):t.appendChild(s(e)))}function o(t,e){return t.nodeName===(\"\"+(e.tag||\"\")).toUpperCase()}function i(t,e){if(console.assert(!!t),!o(t,e))return void t.parentNode.replaceChild(s(e),t);for(var n=Math.min(t.childNodes.length,e.children.length),r=0;r<n;r++){var u=e.children[r],d=t.childNodes[r];if(\"string\"==typeof u)d.textContent!==u&&(3===d.nodeType?d.textContent=u:t.replaceChild(a(u),d));else{var l=u.props&&u.props.key;if(l)if(d.key===l)i(t.childNodes[r],u);else{var f=l&&h[l];f?(t.replaceChild(f,d),t.appendChild(d),i(t.childNodes[r],u)):(t.appendChild(s(e),d),i(t.childNodes[r],u))}else i(t.childNodes[r],u)}}for(var p=t.childNodes.length;p>n;)t.removeChild(t.lastChild),p--;if(e.children.length>n){for(var y=document.createDocumentFragment(),r=n;r<e.children.length;r++)y.appendChild(s(e.children[r]));t.appendChild(y)}c(t,e.props)}function a(t){if(0===t.indexOf(\"_html:\")){var e=document.createElement(\"div\");return e.insertAdjacentHTML(\"afterbegin\",t.substring(6)),e}return document.createTextNode(t)}function s(t){if(console.assert(null!==t&&void 0!==t),\"string\"==typeof t)return a(t);if(!t.tag)return a(JSON.stringify(t));var e=\"svg\"===t.tag?document.createElementNS(\"http://www.w3.org/2000/svg\",t.tag):document.createElement(t.tag);return c(e,t.props),t.children&&t.children.forEach(function(t){return e.appendChild(s(t))}),e}function u(t,e){var n={};return t&&Object.keys(t).forEach(function(t){return n[t]=\"\"}),e&&Object.keys(e).forEach(function(t){return n[t]=e[t]}),n}function c(t,e){console.assert(!!t);var n=t[l]||{};e=u(n,e),t[l]=e;for(var r in e){var o=e[r];if(n[r]!==o)if(\"style\"===r){t.style.cssText&&(t.style.cssText=\"\");for(var i in o)t.style[i]!==o[i]&&(t.style[i]=o[i])}else t[r]!==o&&(t[r]=o),\"key\"===r&&o&&(h[o]=t)}}Object.defineProperty(e,\"__esModule\",{value:!0});var d=n(9),l=\"_props\";e.createElement=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=[],i=function(t){null!==t&&void 0!==t&&\"\"!==t&&o.push(\"function\"==typeof t||\"object\"==typeof t?t:\"\"+t)};if(n.forEach(function(t){Array.isArray(t)?t.forEach(function(t){return i(t)}):i(t)}),\"string\"==typeof t)return{tag:t,props:e,children:o};if(Object.getPrototypeOf(t).name){var a=e&&e.id||\"_\"+t.name+\"_\"+ ++f;return d.default(t,a,e)}return t(e,o)};var f=0,h={};e.updateElement=r,e.render=r,e.default={createElement:e.createElement,updateElement:e.updateElement}},,function(t,e,n){\"use strict\";function r(t,e){console.assert(!!t),o.updateElement(t,e)}Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(6);e.createElement=o.createElement,e.render=r},function(t,e,n){\"use strict\";function r(t,e,n){var r=i[e]?i[e]:i[e]=new t(n).mount(e);return o.default.createElement(\"div\",{id:e},r.render&&r.render())}Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(1),i={};e.default=r},function(t,e,n){\"use strict\";var r=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(1),i=n(4),a=function(){function t(t,e,n,i){var a=this;this.state=t,this.view=e,this.update=n,this.options=i,this._app=new o.App,this._history=[],this._history_idx=-1,this.start=function(t,e){return void 0===t&&(t=null),void 0===e&&(e={render:!0}),a.mount(t,r({},e,{render:!0}))},this.render=function(){return a.view(a.state)}}return t.prototype.renderState=function(t){if(this.view){var e=this.view(t),n=\"string\"==typeof this.element?document.getElementById(this.element):this.element;n&&(n._component=this),n&&o.default.render&&(o.default.render(n,e),this.rendered&&this.rendered(this.state))}},t.prototype.setState=function(t,e){var n=this;if(t instanceof Promise)t.then(function(t){n.setState(t,e)}).catch(function(t){throw console.error(t),t});else{if(null==t)return;this.state=t,!1!==e.render&&this.renderState(t),!1!==e.history&&this.enable_history&&(this._history=this._history.concat([t]),this._history_idx=this._history.length-1),\"function\"==typeof e.callback&&e.callback(this.state)}},t.prototype.mount=function(t,e){var n=this;if(void 0===t&&(t=null),console.assert(!this.element,\"Component already mounted.\"),this.options=e=Object.assign(this.options||{},e),this.element=t,this.global_event=e.global_event,this.enable_history=!!e.history,this.enable_history){var r=function(){n._history_idx--,n._history_idx>=0?n.setState(n._history[n._history_idx],{render:!0,history:!1}):n._history_idx=0},o=function(){n._history_idx++,n._history_idx<n._history.length?n.setState(n._history[n._history_idx],{render:!0,history:!1}):n._history_idx=n._history.length-1};this.on(e.history.prev||\"history-prev\",r),this.on(e.history.next||\"history-next\",o)}return this.add_actions(),void 0===this.state&&(this.state=this.model||{}),e.render?this.setState(this.state,{render:!0,history:!0}):this.setState(this.state,{render:!1,history:!0}),this},t.prototype.is_global_event=function(t){return t&&(t.startsWith(\"#\")||t.startsWith(\"/\"))},t.prototype.add_action=function(t,e,n){var r=this;void 0===n&&(n={}),e&&\"function\"==typeof e&&this.on(t,function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var i=e.apply(void 0,[r.state].concat(t));r.setState(i,n)},n)},t.prototype.add_actions=function(){var t=this,e=this.update||{};i.Reflect.getMetadataKeys(this).forEach(function(n){if(n.startsWith(\"apprun-update:\")){var r=i.Reflect.getMetadata(n,t);e[r.name]=r.action||t[r.key]}});var n={};Object.keys(e).forEach(function(t){var r=e[t];(\"function\"==typeof r||Array.isArray(r))&&t.split(\",\").forEach(function(t){return n[t.trim()]=r})}),Object.keys(n).forEach(function(e){var r=n[e];\"function\"==typeof r?t.add_action(e,r):Array.isArray(r)&&t.add_action(e,r[0],r[1])})},t.prototype.run=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this.global_event||this.is_global_event(t)?o.default.run.apply(o.default,[t].concat(e)):(r=this._app).run.apply(r,[t].concat(e));var r},t.prototype.on=function(t,e,n){return this.global_event||this.is_global_event(t)?o.default.on(t,e,n):this._app.on(t,e,n)},t}();e.Component=a},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(1),o=function(){function t(){var t=this;r.default.on(\"route\",function(e){return t.route(e)}),window.onpopstate=function(e){return t.route(location.hash)},this.route(location.hash)}return t.prototype.route=function(t){if(t||(t=\"#\"),t.indexOf(\"/\")>0){var e=t.split(\"/\"),n=e[0],o=e.slice(1);r.default.run.apply(r.default,[n].concat(o)),r.default.run.apply(r.default,[\"//\",n].concat(o))}else r.default.run(t),r.default.run(\"//\",t)},t}();e.default=o}])});\n//# sourceMappingURL=apprun.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/apprun/dist/apprun.js\n// module id = 0\n// module chunks = 0","import app from 'apprun';\r\nimport './api';\r\n\r\napp.on('//', _ => { });\r\nconst page_size = 30;\r\n\r\nconst state = {};\r\n\r\n\r\nconst Comment = ({ comment }) => {\r\n  if (!comment) return;\r\n  return <li className='comment'>\r\n    <div className='meta'>\r\n      <span>by {comment.by}</span> |&nbsp;\r\n      <span>{timeAgo(comment.time)} ago</span>\r\n    </div>\r\n    <div className='text'>{`_html:${comment.text}`}</div>\r\n    <Comments item={comment} />\r\n  </li>\r\n}\r\n\r\nconst Comments = ({ item }) => {\r\n  if (!item || !item.kids) return;\r\n  const list = item.kids;\r\n  const num = item.kids && item.kids.filter(items => !item.deleted && !item.dead).length;\r\n  return <div>\r\n    {num && <div className='toggle'>{pluralize(num, ' comment')} </div>}\r\n    <ul className='comment-list'> {\r\n      list.filter(item => !item.deleted)\r\n        .map(item => <Comment comment={item} />)\r\n    }\r\n    </ul>\r\n  </div>;\r\n}\r\n\r\nconst Item = ({ item }) => {\r\n  if (!item) return;\r\n  return <div className='story'>\r\n    <h4><a href={item.url}>{item.title}</a></h4>\r\n    {(item.text) && <div className='text'>{`_html:${item.text}`}</div>}\r\n    <div className='meta'>\r\n      <span>{pluralize(item.score, ' point')}</span> |&nbsp;\r\n        <span>by {item.by}</span> |&nbsp;\r\n        <span>{timeAgo(item.time)} ago</span> |&nbsp;\r\n        <span>{pluralize(item.descendants, ' comment')} (in total)  |&nbsp;</span>\r\n      <span><a onclick={() => history.back()}>back</a></span>\r\n    </div>\r\n    <Comments item={item} />\r\n  </div>\r\n}\r\n\r\nconst ListItem = ({ item, idx }) => {\r\n  if (!item) return;\r\n  const item_link = `#/item/${item.id}`;\r\n  return <li>\r\n    <div className={'score'}>{item.score}</div>\r\n    <div><a href={item.url || item_link}>{item.title}</a></div>\r\n    <div className='meta'>\r\n      <span>by {item.by}</span> |&nbsp;\r\n        <span>{timeAgo(item.time)} ago</span> |&nbsp;\r\n        <span><a href={`${item_link}`} >{pluralize(item.descendants, ' comment')}</a></span>\r\n    </div>\r\n  </li>\r\n}\r\n\r\nconst List = ({ list }) => {\r\n  if (!list || !list.items) return;\r\n  return <div>\r\n    <ul className='story-list'> {\r\n      list.items.filter((item, i) => i >= list.min && i < list.max && (typeof item !== 'number'))\r\n        .map(item => <ListItem item={item} idx={list.items.indexOf(item) + 1} />)\r\n    }\r\n    </ul>\r\n    <div className='more'>\r\n      <span>{list.min + 1} - {list.max} ({list.items.length}) &nbsp;</span>\r\n      {list.items && list.max < list.items.length && <a onclick={() => app.run('more')}> |&nbsp; More ...</a>}\r\n    </div>\r\n  </div>;\r\n}\r\n\r\nconst view = state => {\r\n  if (state instanceof Promise) return;\r\n  const style = (type) => ({ 'font-weight': type === state.type ? 'bold' : 'normal' });\r\n  return <div className={`hn ${state.type}`}>\r\n    <div className='header'>\r\n      <div className='inner'>\r\n        <div style={{ 'float': 'left' }}>\r\n          <span style={{ 'margin-right': '20px' }}>\r\n            <a href='https://github.com/yysun/apprun'>AppRun</a> &#10084;&nbsp;\r\n            <a href='https://news.ycombinator.com'>HN</a>\r\n          </span>\r\n          <a style={style('top')} href={`#/top`}>Top</a> |&nbsp;\r\n          <a style={style('new')} href={`#/new`}>New</a> |&nbsp;\r\n          <a style={style('best')} href={`#/best`}>Best</a> |&nbsp;\r\n          <a style={style('show')} href={`#/show`}>Show</a> |&nbsp;\r\n          <a style={style('ask')} href={`#/ask`}>Ask</a> |&nbsp;\r\n          <a style={style('job')} href={`#/job`}>Jobs</a>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div className='main'>\r\n      <div className='inner'>\r\n        {state.type === 'item' ?\r\n          <Item item={state[state.id]} /> :\r\n          <List list={state[state.type]} />}\r\n      </div>\r\n    </div>\r\n    <div className='footer'>\r\n      <div className='inner'>\r\n        Powered by <a href='https://github.com/yysun/apprun'>AppRun</a>,\r\n        Source code: <a href='https://github.com/yysun/apprun-hn'>Github</a>\r\n      </div>\r\n    </div>\r\n  </div>\r\n}\r\n\r\nconst update = {\r\n  '#': (state, type, id) => {\r\n    type = type || state.type || 'top';\r\n    state.type = type;\r\n    state[type] = state[type] || { min: 0, max: page_size, items: [] };\r\n    state.id = id;\r\n    type === 'item' ?\r\n      app.run('get-item', id, state) :\r\n      app.run('get-list', type, state[type]);\r\n  },\r\n  'render': state => state,\r\n  'more': state => {\r\n    const list = state[state.type];\r\n    list.max = Math.min(list.max + page_size, list.items.length)\r\n    app.run('get-list', state.type, list);\r\n  },\r\n}\r\n\r\napp.start('my-app', state, view, update);\r\n\r\ndocument.body.addEventListener('click', e => {\r\n  const t = e.target as HTMLElement;\r\n  if (t.matches('.toggle')) {\r\n    t.classList.toggle('closed');\r\n    t.nextElementSibling && t.nextElementSibling.classList.toggle('collapsed');\r\n  }\r\n});\r\n\r\nfunction pluralize(number, label) {\r\n  if (!number) number = 0;\r\n  return (number === 1) ? number + label : number + label + 's'\r\n}\r\n\r\nfunction timeAgo(time) {\r\n  const between = Date.now() / 1000 - Number(time)\r\n  if (between < 3600) {\r\n    return pluralize(~~(between / 60), ' minute')\r\n  } else if (between < 86400) {\r\n    return pluralize(~~(between / 3600), ' hour')\r\n  } else {\r\n    return pluralize(~~(between / 86400), ' day')\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/hacker-news.tsx","import app from 'apprun';\r\nimport Firebase = require('firebase');\r\n\r\nFirebase.initializeApp({ databaseURL: 'https://hacker-news.firebaseio.com' });\r\nconst db = Firebase.database().ref('/v0');\r\n\r\nconst fetch = async (path): Promise<any> => {\r\n  const ref = db.child(path);\r\n  return new Promise((resolve, reject) => {\r\n    ref.once('value', snapshot => resolve(snapshot.val()), reject);\r\n  })\r\n}\r\n\r\nconst fetchItem = async (id): Promise<any> => {\r\n  const item = await fetch(`item/${id}`);\r\n  if (item && item.kids) item.kids = await Promise.all(item.kids.map(async (item) => {\r\n    return typeof item === 'number' ?\r\n      await fetchItem(item) : item\r\n  }));\r\n  return item;\r\n}\r\n\r\napp.on('get-list', (type, list) => {\r\n  const fetchListItems = async ({ items, min, max }) => {\r\n    await Promise.all(items.map(async (id, idx) => {\r\n      if (idx >= min && idx < max && (typeof id === 'number')) {\r\n        items[idx] = await fetch(`item/${id}`)\r\n      }\r\n    }));\r\n    app.run('render');\r\n  }\r\n  if (list.items.length) return fetchListItems(list);\r\n  const ref = db.child(`${type}stories`);\r\n  ref.on('value', async snapshot => {\r\n    list.items = snapshot.val();\r\n    fetchListItems(list);\r\n  })\r\n});\r\n\r\napp.on('get-item', (id, state) => {\r\n  if (!id) return;\r\n  const ref = db.child(`item/${id}`);\r\n  ref.on('value', async snapshot => {\r\n    state[id] = snapshot.val();\r\n    if (state[id].kids) {\r\n      state[id].kids = await Promise.all(state[id].kids.map(async (id) => {\r\n        return typeof id === 'number' ?\r\n          await fetchItem(id) : id\r\n      }));\r\n    }\r\n    app.run('render');\r\n  })\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api.ts","module.exports = firebase;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"firebase\"\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}